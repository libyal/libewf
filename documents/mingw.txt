Creating a DLL using MinGW

To compile a libewf DLL using mingw you'll need:
* mingw with:
  * Windows Crypto API (libadvapi32)
  * UUID/GUID support (librpcrt4)
* mingw build of zlib library and headers

If no mingw build of zlib is availble, you'll need to build it from the sources.
For this you can use a script similar to the following:

#!/bin/sh
export CC=/opt/local/bin/i386-mingw32-gcc
export CXX=/opt/local/bin/i386-mingw32-g++
export AR=/opt/local/bin/i386-mingw32-ar
export OBJDUMP=/opt/local/bin/i386-mingw32-objdump
export RANLIB=/opt/local/bin/i386-mingw32-ranlib
export STRIP=/opt/local/bin/i386-mingw32-strip
export MINGWFLAGS="-mwin32 -mconsole -march=i586 "
export CFLAGS="$MINGWFLAGS"
export CXXFLAGS="$MINGWFLAGS"

./configure --prefix=/opt/local/i386-mingw32
CC=$CC CXX=$CXX AR=$AR OBJDUMP=$OBJDUMP RANLIB=$RANLIB STRIP=$STRIP CFLAGS="$CFLAGS" CXXFLAGS="$CXXFLAGS" make

And install it in the mingw build tree with:
sudo make install

To build a DLL use:
mingw32-configure --enable-winapi=yes
mingw32-make

It is possible to compile libewf without WINAPI support (--enable-winapi=no).
libewf will need a mingw build of openssl libcrypto for MD5 and SHA1 support
and optionally a mingw build of libuuid for GUID/UUID support.

If mingw32-configure and mingw32-make are not available you'll need to build
it by hand. For this you can use a script similar to the following:

#!/bin/sh
export CC=/opt/local/bin/i386-mingw32-gcc
export CXX=/opt/local/bin/i386-mingw32-g++
export AR=/opt/local/bin/i386-mingw32-ar
export OBJDUMP=/opt/local/bin/i386-mingw32-objdump
export RANLIB=/opt/local/bin/i386-mingw32-ranlib
export STRIP=/opt/local/bin/i386-mingw32-strip
export MINGWFLAGS="-mwin32 -mconsole -march=i586 "
export CFLAGS="$MINGWFLAGS"
export CXXFLAGS="$MINGWFLAGS"

CC=$CC CXX=$CXX AR=$AR OBJDUMP=$OBJDUMP RANLIB=$RANLIB STRIP=$STRIP ./configure --target=i586-mingw32msvc --host=i586 --enable-winapi=yes
CC=$CC CXX=$CXX AR=$AR OBJDUMP=$OBJDUMP RANLIB=$RANLIB STRIP=$STRIP CFLAGS="$CFLAGS" CXXFLAGS="$CXXFLAGS" make

You should end up with the following DLL:
libewf-<version>/libewf/.libs/libewf-2.dll

